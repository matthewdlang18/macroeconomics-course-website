<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Encode URL | macroeconomics-course-website</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Encode URL" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://matthewdlang18.github.io/macroeconomics-course-website/activities/activity2/node_modules/encodeurl/" />
<meta property="og:url" content="https://matthewdlang18.github.io/macroeconomics-course-website/activities/activity2/node_modules/encodeurl/" />
<meta property="og:site_name" content="macroeconomics-course-website" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Encode URL" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Encode URL","url":"https://matthewdlang18.github.io/macroeconomics-course-website/activities/activity2/node_modules/encodeurl/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/macroeconomics-course-website/assets/css/style.css?v=8c999a66923c57131389d1069a50b98d9f45abae">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/macroeconomics-course-website/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://matthewdlang18.github.io/macroeconomics-course-website/">macroeconomics-course-website</a></h1>
      

      <h1 id="encode-url">Encode URL</h1>

<p>Encode a URL to a percent-encoded form, excluding already-encoded sequences.</p>

<h2 id="installation">Installation</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>encodeurl
</code></pre></div></div>

<h2 id="api">API</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">encodeUrl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">encodeurl</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="encodeurlurl">encodeUrl(url)</h3>

<p>Encode a URL to a percent-encoded form, excluding already-encoded sequences.</p>

<p>This function accepts a URL and encodes all the non-URL code points (as UTF-8 byte sequences). It will not encode the “%” character unless it is not part of a valid sequence (<code class="language-plaintext highlighter-rouge">%20</code> will be left as-is, but <code class="language-plaintext highlighter-rouge">%foo</code> will be encoded as <code class="language-plaintext highlighter-rouge">%25foo</code>).</p>

<p>This encode is meant to be “safe” and does not throw errors. It will try as hard as it can to properly encode the given URL, including replacing any raw, unpaired surrogate pairs with the Unicode replacement character prior to encoding.</p>

<h2 id="examples">Examples</h2>

<h3 id="encode-a-url-containing-user-controlled-data">Encode a URL containing user-controlled data</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">encodeUrl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">encodeurl</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">escapeHtml</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">escape-html</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="nx">onRequest</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// get encoded form of inbound url</span>
  <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">encodeUrl</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span>

  <span class="c1">// create html message</span>
  <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;p&gt;Location </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">escapeHtml</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> not found&lt;/p&gt;</span><span class="dl">'</span>

  <span class="c1">// send a 404</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">404</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">text/html; charset=UTF-8</span><span class="dl">'</span><span class="p">)</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Length</span><span class="dl">'</span><span class="p">,</span> <span class="nb">String</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="nx">byteLength</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">)))</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<h3 id="encode-a-url-for-use-in-a-header-field">Encode a URL for use in a header field</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">encodeUrl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">encodeurl</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">escapeHtml</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">escape-html</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">url</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span> <span class="nx">onRequest</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// parse inbound url</span>
  <span class="kd">var</span> <span class="nx">href</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span>

  <span class="c1">// set new host for redirect</span>
  <span class="nx">href</span><span class="p">.</span><span class="nx">host</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">localhost</span><span class="dl">'</span>
  <span class="nx">href</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https:</span><span class="dl">'</span>
  <span class="nx">href</span><span class="p">.</span><span class="nx">slashes</span> <span class="o">=</span> <span class="kc">true</span>

  <span class="c1">// create location header</span>
  <span class="kd">var</span> <span class="nx">location</span> <span class="o">=</span> <span class="nx">encodeUrl</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">href</span><span class="p">))</span>

  <span class="c1">// create html message</span>
  <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;p&gt;Redirecting to new site: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">escapeHtml</span><span class="p">(</span><span class="nx">location</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/p&gt;</span><span class="dl">'</span>

  <span class="c1">// send a 301</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">301</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">text/html; charset=UTF-8</span><span class="dl">'</span><span class="p">)</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Content-Length</span><span class="dl">'</span><span class="p">,</span> <span class="nb">String</span><span class="p">(</span><span class="nx">Buffer</span><span class="p">.</span><span class="nx">byteLength</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">)))</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="dl">'</span><span class="s1">Location</span><span class="dl">'</span><span class="p">,</span> <span class="nx">location</span><span class="p">)</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<h2 id="similarities">Similarities</h2>

<p>This function is <em>similar</em> to the intrinsic function <code class="language-plaintext highlighter-rouge">encodeURI</code>. However, it will not encode:</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">\</code>, <code class="language-plaintext highlighter-rouge">^</code>, or <code class="language-plaintext highlighter-rouge">|</code> characters</li>
  <li>The <code class="language-plaintext highlighter-rouge">%</code> character when it’s part of a valid sequence</li>
  <li><code class="language-plaintext highlighter-rouge">[</code> and <code class="language-plaintext highlighter-rouge">]</code> (for IPv6 hostnames)</li>
  <li>Replaces raw, unpaired surrogate pairs with the Unicode replacement character</li>
</ul>

<p>As a result, the encoding aligns closely with the behavior in the <a href="https://url.spec.whatwg.org/">WHATWG URL specification</a>. However, this package only encodes strings and does not do any URL parsing or formatting.</p>

<p>It is expected that any output from <code class="language-plaintext highlighter-rouge">new URL(url)</code> will not change when used with this package, as the output has already been encoded. Additionally, if we were to encode before <code class="language-plaintext highlighter-rouge">new URL(url)</code>, we do not expect the before and after encoded formats to be parsed any differently.</p>

<h2 id="testing">Testing</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">test</span>
<span class="nv">$ </span>npm run lint
</code></pre></div></div>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://tools.ietf.org/html/rfc3986">RFC 3986: Uniform Resource Identifier (URI): Generic Syntax</a></li>
  <li><a href="https://url.spec.whatwg.org/">WHATWG URL Living Standard</a></li>
</ul>

<h2 id="license">License</h2>

<p><a href="/macroeconomics-course-website/activities/activity2/node_modules/encodeurl/LICENSE">MIT</a></p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
