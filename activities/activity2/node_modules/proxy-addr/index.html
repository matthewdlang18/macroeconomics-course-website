<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>proxy-addr | macroeconomics-course-website</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="proxy-addr" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="https://matthewdlang18.github.io/macroeconomics-course-website/activities/activity2/node_modules/proxy-addr/" />
<meta property="og:url" content="https://matthewdlang18.github.io/macroeconomics-course-website/activities/activity2/node_modules/proxy-addr/" />
<meta property="og:site_name" content="macroeconomics-course-website" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="proxy-addr" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"proxy-addr","url":"https://matthewdlang18.github.io/macroeconomics-course-website/activities/activity2/node_modules/proxy-addr/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/macroeconomics-course-website/assets/css/style.css?v=8c999a66923c57131389d1069a50b98d9f45abae">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/macroeconomics-course-website/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://matthewdlang18.github.io/macroeconomics-course-website/">macroeconomics-course-website</a></h1>
      

      <h1 id="proxy-addr">proxy-addr</h1>

<p><a href="https://npmjs.org/package/proxy-addr"><img src="https://badgen.net/npm/v/proxy-addr" alt="NPM Version" /></a>
<a href="https://npmjs.org/package/proxy-addr"><img src="https://badgen.net/npm/dm/proxy-addr" alt="NPM Downloads" /></a>
<a href="https://nodejs.org/en/download"><img src="https://badgen.net/npm/node/proxy-addr" alt="Node.js Version" /></a>
<a href="https://github.com/jshttp/proxy-addr/actions?query=workflow%3Aci"><img src="https://badgen.net/github/checks/jshttp/proxy-addr/master?label=ci" alt="Build Status" /></a>
<a href="https://coveralls.io/r/jshttp/proxy-addr?branch=master"><img src="https://badgen.net/coveralls/c/github/jshttp/proxy-addr/master" alt="Test Coverage" /></a></p>

<p>Determine address of proxied request</p>

<h2 id="install">Install</h2>

<p>This is a <a href="https://nodejs.org/en/">Node.js</a> module available through the
<a href="https://www.npmjs.com/">npm registry</a>. Installation is done using the
<a href="https://docs.npmjs.com/getting-started/installing-npm-packages-locally"><code class="language-plaintext highlighter-rouge">npm install</code> command</a>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>proxy-addr
</code></pre></div></div>

<h2 id="api">API</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">proxyaddr</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">proxy-addr</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="proxyaddrreq-trust">proxyaddr(req, trust)</h3>

<p>Return the address of the request, using the given <code class="language-plaintext highlighter-rouge">trust</code> parameter.</p>

<p>The <code class="language-plaintext highlighter-rouge">trust</code> argument is a function that returns <code class="language-plaintext highlighter-rouge">true</code> if you trust
the address, <code class="language-plaintext highlighter-rouge">false</code> if you donâ€™t. The closest untrusted address is
returned.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">addr</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">addr</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">127.0.0.1</span><span class="dl">'</span> <span class="p">})</span>
<span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">addr</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="p">})</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">trust</code> arugment may also be a single IP address string or an
array of trusted addresses, as plain IP addresses, CIDR-formatted
strings, or IP/netmask strings.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="dl">'</span><span class="s1">127.0.0.1</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">127.0.0.0/8</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">10.0.0.0/8</span><span class="dl">'</span><span class="p">])</span>
<span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">127.0.0.0/255.0.0.0</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">192.168.0.0/255.255.0.0</span><span class="dl">'</span><span class="p">])</span>
</code></pre></div></div>

<p>This module also supports IPv6. Your IPv6 addresses will be normalized
automatically (i.e. <code class="language-plaintext highlighter-rouge">fe80::00ed:1</code> equals <code class="language-plaintext highlighter-rouge">fe80:0:0:0:0:0:ed:1</code>).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="dl">'</span><span class="s1">::1</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">::1/128</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">fe80::/10</span><span class="dl">'</span><span class="p">])</span>
</code></pre></div></div>

<p>This module will automatically work with IPv4-mapped IPv6 addresses
as well to support node.js in IPv6-only mode. This means that you do
not have to specify both <code class="language-plaintext highlighter-rouge">::ffff:a00:1</code> and <code class="language-plaintext highlighter-rouge">10.0.0.1</code>.</p>

<p>As a convenience, this module also takes certain pre-defined names
in addition to IP addresses, which expand into IP addresses:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="dl">'</span><span class="s1">loopback</span><span class="dl">'</span><span class="p">)</span>
<span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">loopback</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">fc00:ac:1ab5:fff::1/64</span><span class="dl">'</span><span class="p">])</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">loopback</code>: IPv4 and IPv6 loopback addresses (like <code class="language-plaintext highlighter-rouge">::1</code> and
<code class="language-plaintext highlighter-rouge">127.0.0.1</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">linklocal</code>: IPv4 and IPv6 link-local addresses (like
<code class="language-plaintext highlighter-rouge">fe80::1:1:1:1</code> and <code class="language-plaintext highlighter-rouge">169.254.0.1</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">uniquelocal</code>: IPv4 private addresses and IPv6 unique-local
addresses (like <code class="language-plaintext highlighter-rouge">fc00:ac:1ab5:fff::1</code> and <code class="language-plaintext highlighter-rouge">192.168.0.1</code>).</li>
</ul>

<p>When <code class="language-plaintext highlighter-rouge">trust</code> is specified as a function, it will be called for each
address to determine if it is a trusted address. The function is
given two arguments: <code class="language-plaintext highlighter-rouge">addr</code> and <code class="language-plaintext highlighter-rouge">i</code>, where <code class="language-plaintext highlighter-rouge">addr</code> is a string of
the address to check and <code class="language-plaintext highlighter-rouge">i</code> is a number that represents the distance
from the socket address.</p>

<h3 id="proxyaddrallreq-trust">proxyaddr.all(req, [trust])</h3>

<p>Return all the addresses of the request, optionally stopping at the
first untrusted. This array is ordered from closest to furthest
(i.e. <code class="language-plaintext highlighter-rouge">arr[0] === req.connection.remoteAddress</code>).</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">proxyaddr</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">req</span><span class="p">)</span>
</code></pre></div></div>

<p>The optional <code class="language-plaintext highlighter-rouge">trust</code> argument takes the same arguments as <code class="language-plaintext highlighter-rouge">trust</code>
does in <code class="language-plaintext highlighter-rouge">proxyaddr(req, trust)</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">proxyaddr</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="dl">'</span><span class="s1">loopback</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="proxyaddrcompileval">proxyaddr.compile(val)</h3>

<p>Compiles argument <code class="language-plaintext highlighter-rouge">val</code> into a <code class="language-plaintext highlighter-rouge">trust</code> function. This function takes
the same arguments as <code class="language-plaintext highlighter-rouge">trust</code> does in <code class="language-plaintext highlighter-rouge">proxyaddr(req, trust)</code> and
returns a function suitable for <code class="language-plaintext highlighter-rouge">proxyaddr(req, trust)</code>.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">trust</span> <span class="o">=</span> <span class="nx">proxyaddr</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="dl">'</span><span class="s1">loopback</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">addr</span> <span class="o">=</span> <span class="nx">proxyaddr</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">trust</span><span class="p">)</span>
</code></pre></div></div>

<p>This function is meant to be optimized for use against every request.
It is recommend to compile a trust function up-front for the trusted
configuration and pass that to <code class="language-plaintext highlighter-rouge">proxyaddr(req, trust)</code> for each request.</p>

<h2 id="testing">Testing</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">test</span>
</code></pre></div></div>

<h2 id="benchmarks">Benchmarks</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm run-script bench
</code></pre></div></div>

<h2 id="license">License</h2>

<p><a href="/macroeconomics-course-website/activities/activity2/node_modules/proxy-addr/LICENSE">MIT</a></p>



      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
